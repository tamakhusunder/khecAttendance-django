<!-- home is dashboard page for admin-->

{% extends "faceapp/base_layout.html" %}
{% load static %}

{% block content %}
 <div class="content-page">
                <div class="content">

                    <!-- Start Content-->
                    <div class="container-fluid">

                        <div class="row">

                            <div class="col-xl-3 col-md-6">
                                <div class="card-box">
                                    <div class="dropdown float-right">
                                        <a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
                                            <i class="mdi mdi-dots-vertical"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right pl-2">
                                            <!-- item-->
                                                <a href="{% url 'table' %}"> View detail</a>
                                            
                                        </div>
                                    </div>

                                    <h4 class="header-title mt-0 mb-4">Overall Staff</h4>

                                    <div class="widget-chart-1">
                                        <div class="widget-chart-box-1 float-left" dir="ltr">
                                             <i class="fas fa-users fa-5x"></i>
                                        </div>

                                        <div class="widget-detail-1 text-right">
                                            <h2 class="font-weight-normal pt-2 mb-1"> {{sql_totstaff}} </h2>
                                            <a href="{% url 'table' %}"><p class="text-muted mb-1">View details</p></a>
                                        </div>
                                    </div>
                                </div>

                            </div><!-- end col -->

                            <div class="col-xl-3 col-md-6">
                                <div class="card-box">
                                    <div class="dropdown float-right">
                                        <a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
                                            <i class="mdi mdi-dots-vertical"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right pl-2">
                                            <!-- item-->
                                            <a href="{% url 'attendance' %}" class="dropdown-item">View detail</a>
                                        </div>
                                    </div>

                                    <h4 class="header-title mt-0 mb-3">No. of Present</h4>

                                    <div class="widget-box-2">
                                        <div class="widget-detail-2 text-right">
                                            <span class="badge badge-success badge-pill float-left mt-3">{% widthratio sql_present sql_totstaff 100 %} % <i class="mdi mdi-trending-up"></i></span>
                                            <h2 class="font-weight-normal mb-1"> {{sql_present}} </h2>
                                            <a href="{% url 'attendance' %}"><p class="text-muted mb-3">View details</p></a>
                                        </div>
                                        <div class="progress progress-bar-alt-success progress-sm">
                                            <div class="progress-bar bg-success" role="progressbar"
                                                    aria-valuenow="{{sql_present}}" aria-valuemin="0" aria-valuemax="50"
                                                    style="width: {% widthratio sql_present sql_totstaff 100 %}%;">
                                                <span class="sr-only">77% Complete</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
        
                            </div><!-- end col -->

                            <div class="col-xl-3 col-md-6">
                                <div class="card-box">
                                    <div class="dropdown float-right">
                                        <a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
                                            <i class="mdi mdi-dots-vertical"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <!-- item-->
                                            <a href="javascript:void(0);" class="dropdown-item">View detail</a>
                                        </div>
                                    </div>

                                    <h4 class="header-title mt-0 mb-3">No. of Absentee</h4>

                                    <div class="widget-box-2">
                                        <div class="widget-detail-2 text-right">
                                            <span class="badge badge-danger badge-pill float-left mt-3">{% widthratio sql_absent sql_totstaff 100 %} % <i class="mdi mdi-trending-up"></i></span>
                                            <h2 class="font-weight-normal mb-1">{{sql_absent}} </h2>
                                            <p class="text-muted mb-3">View details</p>
                                        </div>

                                        <div class="progress progress-bar-alt-pink progress-sm">
                                            <div class="progress-bar progress-bar-striped bg-danger" role="progressbar"
                                                    aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"
                                                    style="width:{% widthratio sql_absent sql_totstaff 100 %}%;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
        
                            </div><!-- end col -->

                            <div class="col-xl-3 col-md-6">
                                <div class="card-box">
                                    <div class="dropdown float-right">
                                        <a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
                                            <i class="mdi mdi-dots-vertical"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <!-- item-->
                                            <a href="javascript:void(0);" class="dropdown-item">View detail</a>
                                        </div>
                                    </div>

                                    <h4 class="header-title mt-0 mb-4">Unlisted Staff</h4>

                                    <div class="widget-chart-1">
                                        <div class="widget-chart-box-1 float-left" dir="ltr">
                                            <input data-plugin="knob" data-width="80" data-height="80" data-fgColor="#ffbd4a"
                                                    data-bgColor="#FFE6BA" value="1"
                                                    data-skin="tron" data-angleOffset="180" data-readOnly=true
                                                    data-thickness=".15"/>
                                        </div>
                                        <div class="widget-detail-1 text-right">
                                            <h2 class="font-weight-normal pt-2 mb-1"> 1 </h2>
                                            <a href="#" class="text-muted mb-1">View details</a>
                                        </div>
                                    </div>
                                </div>
        
                            </div><!-- end col -->

                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-xl-4">
                                <div class="card-box">
                                    <div class="dropdown float-right">
                                        <a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
                                            <i class="mdi mdi-dots-vertical"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <!-- item-->
                                            <a href="javascript:void(0);" class="dropdown-item">View Details</a>
                                            <!-- item-->
                                            <a href="javascript:void(0);" class="dropdown-item">Another action</a>
                                        </div>
                                    </div>

                                    <!-- 2nd row -->

                                    <h4 class="header-title mt-0">Daily Status</h4>

                                    <div class="widget-chart text-center">
                                        <div id="morris-donut-example" dir="ltr" style="height: 245px;" class="morris-chart"></div>
                                        <ul class="list-inline chart-detail-list mb-0">
                                            <li class="list-inline-item">
                                                <h5 style="color: #5b69bc;"><i class="fa fa-circle mr-1"></i>Present</h5>
                                            </li>
                                            <li class="list-inline-item">
                                                <h5 style="color: #ff8acc;"><i class="fa fa-circle mr-1"></i>Absentee</h5>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div><!-- end col -->

                            <div class="col-xl-4">
                                <div class="card-box">
                                    <div class="dropdown float-right">
                                        <a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
                                            <i class="mdi mdi-dots-vertical"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <!-- item-->
                                            <a href="javascript:void(0);" class="dropdown-item">View Details</a>
                                        </div>
                                    </div>
                                    <h4 class="header-title mt-0">Statistics</h4>
                                    <div id="morris-bar-example" dir="ltr" style="height: 280px;" class="morris-chart"></div>
                                </div>
                            </div><!-- end col -->

                            <div class="col-xl-4">
                                <div class="card-box">
                                    <div class="dropdown float-right">
                                        <a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">
                                            <i class="mdi mdi-dots-vertical"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <!-- item-->
                                            <a href="javascript:void(0);" class="dropdown-item">View Details</a>
                                            <!-- item-->
                                            <a href="javascript:void(0);" class="dropdown-item">Another action</a>
                                        </div>
                                    </div>
                                    <h4 class="header-title mt-0">Total Staff</h4>
                                    <div id="morris-line-example" dir="ltr" style="height: 280px;" class="morris-chart"></div>
                                </div>
                            </div><!-- end col -->

                        </div>
                        <!-- end row -->


                        <!-- Table view -->
                        <div class="row">
                            <div class="col-12">
                                <div class="card-box table-responsive">
                                            <div class="float-right">
                                                ( {{dateintable}} )
                                                <form action="datesearch" method="POST">
                                                    {% csrf_token %}
                                                    <input type="date" name="attendanceDate" value="Today">
                                                    <input type="submit" name="searchDate" value="Apply">
                                                </form>
                                            </div>
                                    <h4 class="mt-0 header-title">Staff Attendance Table</h4>
                                    
                                    <p class="text-muted font-14 mb-3">This table shows Staff Attendances.
                                    </p>

                                    <table id="selection-datatable" class="table table-bordered dt-responsive nowrap">
                                        <thead>
                                        <tr>
                                            <th>Teachers</th>
                                            <th>Code</th>
                                            <th>Designation</th>
                                            <!-- <th>Department</th> -->
                                            <th>Time</th>
                                            <th>Attendance</th>

                                        </tr>
                                        </thead>

                                        <tbody> 

                                            <!-- for present student -->
                                            {% for object in presentDetail %}
                                            <tr>
                                                <td class="text-left">
                                                    <img class="img rounded-circle img-thumbnail" width="30" height="30" alt="icon" src="http://127.0.0.1:8000/media/{{object.0}}">
                                                    {{object.1}}
                                                </td>
                                                <td>{{object.2}}</td>
                                                <td>{{object.3}}</td>
                                                <td><h5><span class="badge badge-success">PRESENT</span></h5></td>
                                                <td>{{object.5}}</td>
                                            </tr>
                                            {% endfor %}

                                            <!-- for absent student -->
                                             {% for object in absentDetail %}
                                            <tr>
                                                <td class="text-left">
                                                    <img class="img rounded-circle img-thumbnail" width="30" height="30" alt="icon" src="http://127.0.0.1:8000/media/{{object.1}}">
                                                    {{object.0}}
                                                </td>
                                                <td>{{object.2}}</td>
                                                <td>{{object.4}}</td>
                                                <td><h5><span class="badge badge-danger">ABSENT</span></h5></td>
                                                <td>----</td>
                                            </tr>

                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <!-- end row -->       
                        
                    </div> <!-- container-fluid -->

                </div> <!-- content -->

                

    </div>
{% endblock %}