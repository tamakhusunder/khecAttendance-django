{% extends "user/base_layout.html" %}
{% load static %}

{% block bodyTemplate %}
<!-- Application container -->
    <div class="container-fluid container-application">
        <!-- Sidenav -->
        <div class="sidenav" id="sidenav-main">
            <!-- Sidenav header -->
            <div class="sidenav-header d-flex align-items-center">
                <a class="navbar-brand" href="#">
                    <h3 style="color: white;"> <span style="color: red;"> KhEC </span>Attendance</h3>
                </a>
                <div class="ml-auto">
                    <!-- Sidenav toggler -->
                    <div class="sidenav-toggler sidenav-toggler-dark d-md-none" data-action="sidenav-unpin"
                        data-target="#sidenav-main">
                        <div class="sidenav-toggler-inner">
                            <i class="sidenav-toggler-line bg-white"></i>
                            <i class="sidenav-toggler-line bg-white"></i>
                            <i class="sidenav-toggler-line bg-white"></i>
                        </div>
                    </div>
                </div>
            </div>
            <!-- User mini profile -->
            <div class="sidenav-user d-flex flex-column align-items-center justify-content-between text-center">
                

                <!-- dynamic part are transfered in rendering page -->

                <!-- Avatar -->
                <div>
                    <a href="#" class="avatar rounded-circle avatar-xl">
                        <img alt="Image placeholder" src="/media/{{userSql.profile.image}}" class="">
                    </a>
                    <div class="mt-4">
                        <h5 class="mb-0 text-white">{{userSql.profile.name}}</h5>
                            <span class="d-block text-sm text-white opacity-8 mb-3">{{userSql.profile.desgination}}</span>
                            <a href="#" class="btn btn-sm btn-white btn-icon rounded-pill shadow hover-translate-y-n3">
                                <span class="btn-inner--icon"><i class="fa fa-coins"></i></span>
                                <span class="btn-inner--text">
                                {% if userSql.profile.active %}
                            		Active
                            	{% else %}
                            		Inactive
                            	{% endif %}
                            	</span>
                            </a>
                    </div>
                </div>

                <!-- User info -->
                <!-- Actions -->
                <!-- <div class="w-100 mt-4 actions d-flex justify-content-between">
                    <a href="#" class="action-item action-item-lg text-white pl-0">
                        <i class="far fa-user"></i>
                    </a>
                    <a href="#" class="action-item action-item-lg text-white" data-toggle="modal">
                        <i class="far fa-comment-alt"></i>
                    </a>
                    <a href="#" class="action-item action-item-lg text-white pr-0">
                        <i class="fa fa-receipt"></i>
                    </a>
                </div> -->
            </div>
            <!-- Application nav -->
            <div class="nav-application clearfix">
                <a href="{% url 'userDash' %}" class="btn btn-square text-sm {% block nav-home %}active{% endblock nav-home %}">
                    <span class="btn-inner--icon d-block"><i class="fa fa-home fa-2x"></i></span>
                    <span class="btn-inner--icon d-block pt-2">Home</span>
                </a>
                <a href="{% url 'userProfile' %}"
                    class="btn btn-square text-sm {% block nav-profile %}{% endblock nav-profile %}">
                    <span class="btn-inner--icon d-block"><i class="fa fa-user-ninja fa-2x"></i></span>
                    <span class="btn-inner--icon d-block pt-2">Profile</span>
                </a>
                <a href="{% url 'user_setting' %}" class="btn btn-square text-sm {% block nav-setting %}{% endblock nav-setting %}">
                    <span class="btn-inner--icon d-block"><i class="fa fa-cogs fa-2x"></i></span>
                    <span class="btn-inner--icon d-block pt-2">Settings</span>
                </a>
                <a href="{% url 'logout' %}"
                    class="btn btn-square text-sm {% block nav-dash %}{% endblock nav-dash %}">
                    <span class="btn-inner--icon d-block"><i class="fa fa-columns fa-2x"></i></span>
                    <span class="btn-inner--icon d-block pt-2">Logout</span>
                </a>
                <!-- <a href="#" class="btn btn-square text-sm">
                    <span class="btn-inner--icon d-block"><i class="fa fa-tasks fa-2x"></i></span>
                    <span class="btn-inner--icon d-block pt-2">Holiday</span>
                </a> -->
                
                <!-- <a href="#" class="btn btn-square text-sm">
                    <span class="btn-inner--icon d-block"><i class="fa fa-users-cog fa-2x"></i></span>
                    <span class="btn-inner--icon d-block pt-2">Inbox</span>
                </a> -->
                <!-- <a href="#" class="btn btn-square text-sm">
                    <span class="btn-inner--icon d-block"><i class="fa fa-user-ninja fa-2x"></i></span>
                    <span class="btn-inner--icon d-block pt-2">To Do</span>
                </a> -->
                <!-- <a href="#" class="btn btn-square text-sm">
                    <span class="btn-inner--icon d-block"><i class="fa fa-receipt fa-2x"></i></span>
                    <span class="btn-inner--icon d-block pt-2">Invoices</span>
                </a> -->
                
            </div>
            <!-- Misc area -->
        </div>
        <!-- Content -->
        <div class="main-content position-relative">
            <!-- Main nav -->
            <nav class="navbar navbar-main navbar-expand-lg navbar-dark bg-primary navbar-border" id="navbar-main">
                <div class="container-fluid">
                    <!-- Brand + Toggler (for mobile devices) -->
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbar-main-collapse" aria-controls="navbar-main-collapse" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <!-- Navbar nav -->
                    <div class="collapse navbar-collapse navbar-collapse-fade" id="navbar-main-collapse">
                        <ul class="navbar-nav align-items-lg-center">
                            <!-- Overview  -->

                            <li class="border-top opacity-2 my-2"></li>
                            <!-- Home  -->
                            <li class="nav-item ">
                                <a class="nav-link pl-lg-0" href="{% url 'userDash' %}">
                                    Home
                                </a>
                            </li>
                            <!-- Application menu -->
                            <li class="nav-item ">
                                <a class="nav-link " href="{% url 'userProfile' %}">
                                    Profile
                                </a>

                            </li>

                            <!-- <li class="border-top opacity-2 my-2"></li> -->
                            <!-- Docs menu -->
                            <!-- <li class="nav-item">
                                <a class="nav-link" href="#">
                                    Attendance
                                </a>
                            </li> -->
                        </ul>

                        <!-- Right menu -->
                        <ul class="navbar-nav ml-lg-auto align-items-center d-none d-lg-flex">
                            <li class="nav-item">
                                <a href="#" class="nav-link nav-link-icon sidenav-toggler" data-action="sidenav-pin"
                                    data-target="#sidenav-main"><i class="fa fa-bars"></i></a>
                            </li>
                            <li class="nav-item dropdown dropdown-animate">
                                <a class="nav-link pr-lg-0" href="#" role="button" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                    <div class="media media-pill align-items-center">

                                        <div class="ml-2 d-none d-lg-block">
                                            <span class="mb-0 text-sm  font-weight-bold">My Account</span>
                                        </div>
                                    </div>
                                </a>
                                <div class="dropdown-menu dropdown-menu-sm dropdown-menu-right dropdown-menu-arrow">
                                    <h6 class="dropdown-header px-0">Hi, {{userSql.profile.name}}!</h6>
                                    <a href="{% url 'userProfile' %}" class="dropdown-item">
                                        <i class="far fa-user"></i>
                                        <span>My profile</span>
                                    </a>
                                    <a href="{% url 'user_setting' %}" class="dropdown-item">
                                        <i class="fa fa-cog"></i>
                                        <span>Settings</span>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a href="{% url 'logout' %}" class="dropdown-item">
                                        <i class="fa fa-sign-out-alt"></i>
                                        <span>Logout</span>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- Page content -->
            <div class="page-content">
                <!-- Page title -->
                <div class="page-title">
                    <div class="row justify-content-between align-items-center">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <h5 class="h3 font-weight-400 mb-0 text-white">Greetings, {{userSql.profile.name}}!</h5>
                            <span class="text-sm text-white opacity-8">Have a nice day!</span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xl-12 col-md-12">

                        <div class="card card-fluid card-body shadow p-3 mb-5 bg-white rounded">

                            <!-- Block Content Here-->
                            {% block content %}
                                <!--content area start-->
                                <div id="content" class="pmd-content inner-page profile-page">
                                    <div class="cover-content">
                                        <div class="page-content">
                                            <div class="d-flex d-flex-row align-items-center mobile-view">
                                                <div class="media-body">
                                                    <h1 class="card-title media-body">Attendance Record</h1>
                                                    <p class="pmd-list-subtitle"></p>
                                                    <p>
                                                    </p>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="page-content profile-view">
                                        <div class="row col-12">
                                            <div class="pmd-tabs">
                                                <div class="pmd-tab-active-bar" style="width: 97.9531px; left: 0px;"></div>
                                                <ul class="nav nav-tabs" role="tablist" style="width: 343.813px;">
                                                    <li class="nav-item"><a class="nav-link active" href="#about" aria-controls="about" role="tab"
                                                            data-toggle="tab">Sheet</a></li>
                                                </ul>
                                            </div>
                                            <!-- Tab panes -->
                                            <div class="tab-content">
                                                <!-- About Tab -->
                                                <div role="tabpanel" class="tab-pane active" id="about">

                                                    <div class="card-body shadow p-3 mb-5 bg-white rounded">

                                                        <!-- Basic Information -->
                                                        <div class="details-tab">
                                                            <div class="d-flex flex-row align-items-center mb-2">
                                                                <h3 class="card-title media-body">Table</h3>

                                                            </div>
                                                            <div class="row view-basic-card">
                                                                
                                                            <div class="card-body">
                                                                <!-- ############ -->




                            <div class="card-header">
                                <div class="row">
                                    <div class="col-md-4"><i class="fas fa-table mr-1"></i> Attendance Sheet </div>
                                    <div class="col-md-4"><b><u id="dateId" style="color:blue;"> {{dateIntable}}</u></b></div>
                                    <div class="col-md-4">
                                        <form action="" method="POST">
                                            {% csrf_token %}
                                            <input type="date" name="attendanceDate" value="Today">
                                            <input type="submit" name="searchDate" value="Apply">
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <!-- nav nav tab contents -->


                                <div class="tab-pane fade show active" id="pills-total" role="tabpanel"
                                    aria-labelledby="pills-total-tab">

                                    <!-- total table -->
                                    <div class="row">
                                        <div class="table-responsive">
                                            <table id=""
                                                class="table table-striped table-bordered dt-responsive nowrap">
                                                <thead>
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Employee Id</th>
                                                        <th>Designation</th>
                                                        <th>Attendance</th>
                                                        <th>Time</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    {% for p_row in presentSql %}
                                                    {% for at_row in attendSql %}
                                                        {% if p_row.id == at_row.user_id%}
                                                        {% if at_row.time >= time1 and at_row.time <= time2 %}
                                                            <tr>
                                                                <td class="text-left">
                                                                    <img class="img rounded-circle img-thumbnail" width="30"
                                                                        height="30" alt="icon"
                                                                        src="/media/{{p_row.profile.image}}">
                                                                    {{p_row.profile.name}}
                                                                </td>
                                                                <td>{{p_row.username}}</td>
                                                                <td>{{p_row.profile.desgination}}</td>
                                                                <td>
                                                                    <h5><span class="badge badge-success">PRESENT</span></h5>
                                                                </td>
                                                                <td>{{at_row.time}}</td>
                                                            </tr>
                                                        {% endif %}
                                                        {% endif %}
                                                    {% endfor %}
                                                    {% endfor %}

                                                    {% for a_row in absentSql %}
                                                    <tr>
                                                        <td class="text-left">
                                                            <img class="img rounded-circle img-thumbnail" width="30"
                                                                height="30" alt="icon"
                                                                src="/media/{{a_row.profile.image}}">
                                                            {{a_row.profile.name}}
                                                        </td>
                                                        <td>{{a_row.username}}</td>
                                                        <td>{{a_row.profile.desgination}}</td>
                                                        <td>
                                                            <h5><span class="badge badge-danger">ABSENT</span></h5>
                                                        </td>
                                                        <td>----</td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!-- close nav nav tab contents -->




                                                                
                                                                <!-- #### -->

                                                            </div>


                                                            </div>

                                                        </div>

                                                        
                                                    </div>

                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <!-- content area end -->



                            
                            {% endblock %}


                        </div>

                    </div>

                </div>

            </div>

        </div>
    </div>

{% endblock bodyTemplate %}


